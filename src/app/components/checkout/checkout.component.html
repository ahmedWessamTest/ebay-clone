<section class="py-8">
  <div class="flex justify-center content-center">
    <div class="flex justify-center">
      <div class="min-w-96">
        <h1 class="text-3xl text-center font-bold pb-4 text-[#191919]">
          Checkout your cart
        </h1>
        <form [formGroup]="checkoutForm" (ngSubmit)="checkoutSubmit()">
          <div class="relative pb-4">
            <input
              type="text"
              id="details"
              class="block rounded-lg px-2 pb-2 pt-3 w-full text-sm text-gray-900 bg-gray-50 appearance-none focus:outline-none focus:ring-0 focus:border-2 focus:border-black peer"
              [class.border-red-700]="
                checkoutForm.get('details')?.errors &&
                (checkoutForm.get('details')?.touched ||
                  checkoutForm.get('details')?.dirty)
              "
              placeholder=" "
              formControlName="details"
            />
            <label
              for="details"
              class="absolute text-sm text-gray-500 duration-300 transform -translate-y-4 scale-75 top-3 z-10 origin-[0] start-2.5 peer-focus:text-gray-400 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-3 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto"
              >Address details</label
            >
            @if(checkoutForm.get('details')?.getError('required') &&
            (checkoutForm.get('details')?.touched)){
            <p class="text-red-700 text-xs">
              please enter your address details
            </p>
            } @else if(checkoutForm.get('details')?.getError('minLength') &&
            checkoutForm.get('details')?.dirty){
            <p class="text-red-700 text-xs">
              details address should be at least 3 characters.
            </p>
            }
          </div>
          <div class="relative pb-4">
            <input
              type="tel"
              id="phone"
              class="block rounded-lg px-2 pb-2 pt-3 w-full text-sm text-gray-900 bg-gray-50 appearance-none focus:outline-none focus:ring-0 focus:border-2 focus:border-black peer"
              [class.border-red-700]="
                checkoutForm.get('phone')?.errors &&
                checkoutForm.get('phone')?.touched
              "
              placeholder=" "
              formControlName="phone"
            />
            <label
              for="phone"
              class="absolute text-sm text-gray-500 duration-300 transform -translate-y-4 scale-75 top-3 z-10 origin-[0] start-2.5 peer-focus:text-gray-400 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-3 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto"
              >Phone</label
            >
            @if (checkoutForm.get('phone')?.errors &&
            (checkoutForm.get('phone')?.touched ||
            checkoutForm.get('phone')?.dirty )) {
            <div>
              @if(checkoutForm.get('phone')?.getError('required')){
              <p class="text-red-700 text-xs">
                details address should be at least 3 characters.
              </p>
              } @else if(checkoutForm.get('phone')?.getError('phone')){
              <p class="text-red-700 text-xs">
                please enter valid phone number
              </p>
              }
            </div>
            }
          </div>
          <div class="relative pb-4">
            <input
              type="text"
              id="city"
              class="block rounded-lg px-2 pb-2 pt-3 w-full text-sm text-gray-900 bg-gray-50 appearance-none focus:outline-none focus:ring-0 focus:border-2 focus:border-black peer"
              [class.border-red-700]="
                checkoutForm.get('city')?.errors &&
                checkoutForm.get('city')?.touched
              "
              placeholder=" "
              formControlName="city"
            />
            <label
              for="city"
              class="absolute text-sm text-gray-500 duration-300 transform -translate-y-4 scale-75 top-3 z-10 origin-[0] start-2.5 peer-focus:text-gray-400 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-3 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto"
              >city</label
            >
            @if (checkoutForm.get('city')?.errors &&
            (checkoutForm.get('city')?.touched ||
            checkoutForm.get('city')?.dirty )) {
            <div>
              @if(checkoutForm.get('city')?.getError('required')){
              <p class="text-red-700 text-xs">
                city should be at least 3 characters.
              </p>
              } @else if(checkoutForm.get('city')?.getError('minLength')){
              <p class="text-red-700 text-xs"></p>
              }
            </div>
            }
          </div>
          <button
            class="text-center block w-full rounded-full py-2.5 font-bold text-white bg-[#3665f3] hover:bg-[#0F2796] disabled:bg-[#c7c7c7] disabled:cursor-not-allowed"
            type="submit"
            [disabled]="checkoutForm.invalid && !isLoading"
          >
            Login to your account
          </button>
          @if(isLoading()){
          <span class="block text-center mt-4">
            <i class="fa-solid fa-spinner fa-spin-pulse"></i>
          </span>
          } @else if (errorMsg()){
          <div
            class="p-4 mt-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
            role="alert"
          >
            {{ errorMsg() }}
          </div>
          } @else if (successMsg()) {
          <div
            class="p-4 mt-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400"
            role="alert"
          >
            logged in successful
          </div>
          }
        </form>
      </div>
    </div>
  </div>
</section>
